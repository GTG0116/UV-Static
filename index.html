<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unblocked Games Proxy</title>
    <script src="/uv/uv.bundle.js"></script>
    <script src="/uv/uv.config.js"></script>
    <style>
        body { font-family: system-ui, sans-serif; background: #0d1117; color: #c9d1d9; margin: 0; padding: 20px; }
        header { text-align: center; margin: 0 0 30px; }
        h1 { margin: 0; }
        input { width: 60%; max-width: 700px; padding: 12px; font-size: 16px; border: 1px solid #30363d; border-radius: 6px; background: #0d1117; color: #c9d1d9; }
        button { padding: 12px 24px; font-size: 16px; margin-left: 10px; border-radius: 6px; background: #238636; color: white; border: none; cursor: pointer; }
        button:hover { background: #2ea043; }
        .games { margin-top: 40px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; }
        .card { background: #161b22; padding: 20px; border-radius: 8px; text-align: center; cursor: pointer; transition: 0.2s; }
        .card:hover { background: #21262d; transform: translateY(-4px); }
        #frame { width: 100%; height: 80vh; border: none; display: none; margin-top: 30px; background: black; }
    </style>
</head>
<body>
    <header>
        <h1>Unblocked Games + Proxy</h1>
        <p>Enter URL/search or click a game below.</p>
        <input id="input" placeholder="https://example.com or search term" autofocus>
        <button id="launch">Launch</button>
    </header>

    <section class="games">
        <h2>Games</h2>
        <div class="grid" id="games-grid"></div>
    </section>

    <iframe id="frame"></iframe>

    <script>
        window.addEventListener('load', () => {
            if (typeof __uv$config === 'undefined') {
                alert("UV files missing – make sure /uv/ folder has uv.bundle.js, uv.config.js, etc.");
                return;
            }

            const { prefix, encodeUrl } = __uv$config;

            // Launch button
            document.getElementById('launch').onclick = () => {
                let val = document.getElementById('input').value.trim();
                if (!val) return;
                if (!val.match(/^https?:\/\//)) {
                    if (val.includes('.')) val = 'https://' + val;
                    else val = 'https://www.google.com/search?q=' + encodeURIComponent(val);
                }
                loadProxied(val);
            };

            // Games list – edit here to add/remove
            const games = [
                { name: 'Slope', url: 'https://www.slope.game/' },
                { name: 'Retro Bowl', url: 'https://www.retrobowlgame.io/' },
                { name: '1v1.LOL', url: 'https://1v1.lol/' },
                { name: 'Cookie Clicker', url: 'https://orteil.dashnet.org/cookieclicker/' },
                { name: 'Krunker.io', url: 'https://krunker.io/' },
                // Add: { name: 'Game', url: 'https://...' },
            ];

            const grid = document.getElementById('games-grid');
            games.forEach(game => {
                const card = document.createElement('div');
                card.className = 'card';
                card.textContent = game.name;
                card.onclick = () => loadProxied(game.url);
                grid.appendChild(card);
            });

            function loadProxied(url) {
                const proxied = prefix + encodeUrl(url);
                const frame = document.getElementById('frame');
                frame.src = proxied;
                frame.style.display = 'block';
                window.scrollTo(0, frame.offsetTop);
            }

            // Service Worker
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/uv/uv.sw.js', { scope: __uv$config.prefix || '/service/' })
                    .catch(err => console.error('SW error:', err));
            }
        });
    </script>
</body>
</html>
